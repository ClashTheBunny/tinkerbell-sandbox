packages:
- unzip

write_files:
- encoding: b64
  content: ${COMPOSE_ZIP}
  path: /root/compose.zip

runcmd:
- unzip -v /root/compose.zip -d /root/sandbox
- echo TINKERBELL_CLIENT_MAC=${WORKER_MAC} >>/root/sandbox/compose/.env
- echo TINKERBELL_TEMPLATE_MANIFEST=/manifests/template/ubuntu-equinix-metal.yaml >>/root/sandbox/compose/.env
- echo TINKERBELL_HARDWARE_MANIFEST=/manifests/hardware/hardware-equinix-metal.json >>/root/sandbox/compose/.env
- docker-compose -f /root/sandbox/compose/docker-compose.yml up
